<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self' https:; font-src 'self' data: https:; media-src 'self' https:; child-src 'self' https:; frame-src 'self' https:;">
    <title>Brawza - AI-Agent Browser</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- Header with navigation controls -->
        <header id="header">
            <div class="nav-controls">
                <button id="back-btn" title="Go Back">‚Üê</button>
                <button id="forward-btn" title="Go Forward">‚Üí</button>
                <button id="refresh-btn" title="Refresh">‚Üª</button>
                <input type="text" id="url-bar" placeholder="Enter URL or search...">
                <button id="go-btn">Go</button>
            </div>
            <div class="window-controls">
                <button id="settings-btn" title="Settings">‚öôÔ∏è</button>
                <button id="sidebar-toggle" title="Toggle AI Sidebar">ü§ñ</button>
            </div>
        </header>

        <!-- Main content area -->
        <main id="main-content">
            <!-- Browser view container -->
            <div id="browser-container">
                <webview id="browser-view" 
                         src="about:blank"
                         style="width: 100%; height: 100%;"
                         allowpopups="false"
                         nodeintegration="false"
                         nodeintegrationinsubframes="false"
                         disablewebsecurity="true"
                         webpreferences="contextIsolation=false,enableRemoteModule=false,sandbox=false,javascript=true,webSecurity=false,allowRunningInsecureContent=true,experimentalFeatures=true"
                         useragent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
                         partition="persist:webview">
                </webview>
                <div id="browser-placeholder" style="width: 100%; height: 100%; display: none; align-items: center; justify-content: center; background: #f5f5f5; color: #666; font-size: 18px;">
                    Loading...
                </div>
            </div>

            <!-- AI Sidebar -->
            <aside id="ai-sidebar" class="sidebar hidden">
                <div class="sidebar-header">
                    <h3>AI Assistant</h3>
                    <select id="ai-service-select">
                        <option value="openai">ChatGPT</option>
                        <option value="gemini">Gemini</option>
                        <option value="claude">Claude</option>
                    </select>
                    <button id="sidebar-close">√ó</button>
                </div>
                
                <!-- AI Action Buttons -->
                <div class="ai-actions">
                    <button id="analyze-page-btn" class="ai-action-btn" title="Analyze current page">
                        üìä Analyze Page
                    </button>
                    <button id="summarize-page-btn" class="ai-action-btn" title="Summarize current page">
                        üìù Summarize
                    </button>
                    <button id="take-screenshot-btn" class="ai-action-btn" title="Take screenshot">
                        üì∏ Screenshot
                    </button>
                </div>
                
                <div class="chat-container">
                    <div id="chat-messages"></div>
                    <div class="chat-input-container">
                        <textarea id="chat-input" placeholder="Ask the AI about this page..."></textarea>
                        <button id="send-btn">Send</button>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Settings</h2>
                    <button id="settings-close">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="settings-section">
                        <h3>AI Service Configuration</h3>
                        <p class="settings-help">Click the links below to open each service's dashboard and get your API key. Then paste it here and test the connection.</p>
                        
                        <div class="service-config">
                            <h4>OpenAI (ChatGPT)</h4>
                            <div class="service-links">
                                <a href="#" id="openai-dashboard" class="dashboard-link">üîó Get API Key from OpenAI Dashboard</a>
                            </div>
                            <input type="password" id="openai-key" placeholder="Enter OpenAI API Key">
                            <button id="test-openai">Test Connection</button>
                        </div>
                        
                        <div class="service-config">
                            <h4>Google Gemini</h4>
                            <div class="service-links">
                                <a href="#" id="gemini-dashboard" class="dashboard-link">üîó Get API Key from Google AI Studio</a>
                            </div>
                            <input type="password" id="gemini-key" placeholder="Enter Gemini API Key">
                            <button id="test-gemini">Test Connection</button>
                        </div>
                        
                        <div class="service-config">
                            <h4>Anthropic Claude</h4>
                            <div class="service-links">
                                <a href="#" id="claude-dashboard" class="dashboard-link">üîó Get API Key from Anthropic Console</a>
                            </div>
                            <input type="password" id="claude-key" placeholder="Enter Claude API Key">
                            <button id="test-claude">Test Connection</button>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <h3>Performance</h3>
                        <label>
                            <input type="checkbox" id="headless-mode"> Enable headless mode
                        </label>
                        <label>
                            Memory limit: <input type="range" id="memory-limit" min="100" max="1000" value="500">
                            <span id="memory-value">500MB</span>
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="save-settings">Save Settings</button>
                </div>
            </div>
        </div>
    </div>

    <script src="../../dist/renderer/renderer.js"></script>
</body>
</html>